{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nexport async function fetchImages(query, page = 1) {\n    const URL = \"https://pixabay.com/api\";\n    const API_KEY = \"45306950-544d7ee3c7cf7db24fb2a5eae\";\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: 15,\n        page: page\n    });\n\n    try {\n        const response = await fetch(`${URL}/?${params.toString()}`);\n    if (!response.ok) {\n        throw new Error(response.status);\n    }\n    return await response.json();\n    } catch(error) {\n        console.error('Error:', error);\n        return null;\n    };\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderGallery(images) {\n    const gallery = document.getElementById('gallery');\n    gallery.innerHTML = '';\n\n    if (images.length === 0) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!'\n        });\n        return;\n    }\n\nconst imageCards = images.map(image => {\n  return `\n          <a class=\"gallery-item\" href=\"${image.largeImageURL}\">\n              <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\"/>\n              <div class=\"features\">\n                  <p>Likes: ${image.likes}</p>\n                  <p>Views: ${image.views}</p>\n                  <p>Comments: ${image.comments}</p>\n                  <p>Downloads: ${image.downloads}</p>\n              </div>\n          </a>\n        `;\n  }).join('');\n\ngallery.innerHTML = imageCards;\n\nnew SimpleLightbox('.gallery a');\n}\n\nexport function showLoader() {\n  document.getElementById('loader').classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  document.getElementById('loader').classList.add('hidden');\n}\nexport function showLoadMoreButton() {\n  document.querySelector('.btn').classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  document.querySelector('.btn').classList.add('hidden');\n}\n","import iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions.js';\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\nlet data = {};\n\ndocument.querySelector('form').addEventListener('submit', async event => {\n  event.preventDefault();\n  query = document.getElementById('search-input').value.trim();\n\n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query!',\n    });\n    return;\n  }\n\ndocument.getElementById('search-input').value = '';\n\n  page = 1;\n  hideLoadMoreButton();\n  clearGallery();\n  showLoader();\n\n  data = await fetchImages(query, page);\n  hideLoader();\n\n  if (data && data.hits.length > 0) {\n    totalHits = data.totalHits;\n    renderGallery(data.hits);\n\n    if(page * 15 < totalHits) {\n    showLoadMoreButton();\n    }\n  } else {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  }\n});\n\ndocument.querySelector('.btn').addEventListener('click', async () => {\n  page += 1;\n\n  showLoader();\n  const newData = await fetchImages(query, page);\n  data.hits.push(...newData.hits);\n  //   data.hits = [...data.hits, ...newData.hits];\n\n  hideLoader();\n  if (data && data.hits.length > 0) {\n    renderGallery(data.hits);\n    scrollPage();\n    if (page * 15 >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: 'End',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  }\n});\n\nfunction clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n\nfunction scrollPage() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["fetchImages","query","page","URL","API_KEY","params","response","error","renderGallery","images","gallery","imageCards","image","SimpleLightbox","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","totalHits","data","event","iziToast","clearGallery","newData","scrollPage","cardHeight"],"mappings":"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"}